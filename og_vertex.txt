#version 410 core                                                  
// Per-vertex inputs                                                
layout (location = 0) in vec4 position;                            
layout (location = 1) in vec4 color;                            
layout (location = 2) in vec4 normal;                           
																	
layout(std140) uniform constants									
{																	
	mat4 mv_matrix;													
	mat4 view_matrix;												
	mat4 proj_matrix;												
	vec4 uni_color;										     		
	bool useUniformColor;										     
};																	
                                                                   
out VS_OUT                                                         
{                                                                 
    vec4 color;                                                    
} vs_out;                                                          
                                                                   
                                                                 
void main(void)                                                    
{                                                                 
    // Calculate view-space coordinate								
    vec4 P = mv_matrix * position;								
    if (useUniformColor)								
    {                               							
       vs_out.color = uni_color;                               							
    }                           									
    else									
    {                               							
       vs_out.color = color;	                           						
    }                           									
    gl_Position = proj_matrix * P;								    
}                                                                  